#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ðŸ”§ Pre-commit: lint-staged (frontend) & pint (backend)"

# FRONTEND: lint & format samo staged fajlove
if [ -d "frontendApp" ]; then
  echo "â†’ Frontend: lint-staged"
  cd frontendApp || exit 1
  pnpm exec lint-staged || exit 1
  cd - >/dev/null 2>&1
fi

# BACKEND: pint samo na promenjenim fajlovima
if [ -d "backend" ]; then
  echo "â†’ Backend: pint --dirty"
  cd backend || exit 1
  if [ -f "vendor/bin/pint" ]; then
    vendor/bin/pint --dirty || exit 1
  else
    ./vendor/bin/pint --dirty || exit 1
  fi
  cd - >/dev/null 2>&1
fi

echo "âœ… Pre-commit ok"
